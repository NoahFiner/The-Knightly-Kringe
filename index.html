<!DOCTYPE html>
<html>
    <head>
        <title>The Knightly Kringe</title>
        <script type='text/javascript' src="res/jquery.js"></script>
        <link type="text/css" rel="stylesheet" href="style.css"/>
        <link rel="icon" href="favicon.ico" type="image/x-icon">
        <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59921773-2', 'auto');
  ga('send', 'pageview');

</script>
    </head>
    <body id="annoyinghtml">
    <div id="stars">
    </div>
    <div id="fixed-crap">
      <div id="header-outer" class="hidey">
        <div id="header-left" class="header-section">
          <div id="button2" onclick="$('html, body').animate({scrollTop:0}, 1000);" class="coolbutton">
              Back to top
          </div>
        </div>
        <div id="header-middle" class="header-section">
          <img src="logo.png"/>
        </div>
        <div id="header-right" class="header-section">
          <div id="button3" onclick="toggleAbout()" class="coolbutton">
              About
          </div>
        </div>
      </div>
      <div id="about">
        <p>The Knightly Kringe is a student-run newspaper for Fairview High School. We're focused on the production of punny school news.</p>
        <p>Site made by Noah. Articles by Noah, Jake, and Michal.</p>
      </div>
    </div>
    <div id="lower">
        <div id="lower-background">
            <img src="header-new.png" id="header"/>
            <img src="dirt-top.png" id="dirt-top"/>
            <img src="dirt.png" class="dirt"/>
            <img src="dirt.png" class="dirt"/>
            <img src="dirt.png" class="dirt"/>
            <img src="dirt.png" class="dirt"/>
        </div>
        <div id="lower-content">

        <div class="article-outer" id="article1">
            <img class="article-back" src="article-border.png"/>
            <div class="article-inner">
                <div class="article-image">
                    <img src="article1.jpg" class="article-image-img"/>
                </div>
                <div class="article-text">
                    <h1>The New PARCC Schedule</h1>
                    <h6>By Noah Finer</h6>
                    <p>Three weeks before the start of the April PARCC testing, the schedule was decided to be updated. PARCC testing went from occurring during math and language arts periods for students taking part in the test for a full week of block days to a normal schedule, bringing math and language arts back for all students, but forcing students taking the test to do it during their free periods up into May. Many students did not agree with the tests in general, especially the ones taking it, but most of the student body likes the new schedule less than the original ones. The teachers do prefer the newer schedule, though.</p>
                </div>
            </div>
        </div>

        <div class="article-outer" id="article2">
            <img class="article-back" src="article-border.png"/>
            <div class="article-inner">
                <div class="article-image">
                    <img src="article2.jpg" class="article-image-img"/>
                </div>
                <div class="article-text">
                    <h1>Album Review Carrie and Lowell</h1>
                    <h6>By Jake Pykkonen</h6>
                    <p>What inspires the man whose past tours have included everyone on the stage dressed up in boy scout esque uniforms and wings, everyone covered in neon body paint? At one point he planned to make an album for every state and so far has done one for Illinois and one for  Michigan, he has made multiple Christmas albums, and has covered topics from the death of a close childhood friend and the story of serial killer John Wayne Gacy.</p>
                </div>
            </div>
        </div>

    </div>
    </div>
        <div id="fixed-stuff">
            <h1 id="loading">Loading...</h1>
            <iframe src="">
            </iframe>
            <div id="button" class="coolbutton">
                Go back
            </div>
        </div>
    <script>

    var Star = function(id, mLeft, mTop) {
        this.id = id;
        $('#stars').append("<div class='star' id="+id+" style='margin-left:"+mLeft+"px;margin-top:"+mTop+"px'></div>")
        this.glitter = function() {
            $('#'+id).animate({marginLeft:"-=5px",marginTop:"-=5px",height:"+=10px",width:"+=10px"},500);
            $('#'+id).animate({marginLeft:"+=5px",marginTop:"+=5px",height:"-=10px",width:"-=10px"},500);
        }
    }
    var up = function() {
        $('#about').fadeTo(500, 0);
        aboutActive = false;
        $('#lower').animate({marginTop:"+=1500px"}, 1000);
        $('#stars').animate({marginTop:"+=500px"}, 1000);
        $("html, body").animate({scrollTop:0}, 1000);
        $('#fixed-stuff').fadeTo(1000, 1);
        $('iframe').css("pointer-events", "auto");//made this auto at first, but screw it
    }
    var down = function() {
        //$('iframe').blur();
        $('#about').fadeTo(500, 0);
        aboutActive = false;
        $('#lower').animate({marginTop:"-=1500px"}, 1000);
        $('#stars').animate({marginTop:"-=500"}, 1000);
        $("html, body").animate({scrollTop:0}, 1000);
        $('#fixed-stuff').fadeTo(1000, 0);
        $('iframe').css("pointer-events", "none");
    }
    var ss = []; //this has to do with the stars i think
    for(i = 0; i < 400; i++) {
        ss[i] = new Star("s"+i, Math.random()*1500, Math.random()*3000);
    }
    var glitterAFew = function() {
        for(i = 0; i < 20; i++) {
            ss[Math.floor(Math.random()*99)].glitter();
        }
    }
    var activateiframe = function(which) {
        $('iframe').attr("src", "article"+which+".html");
        $('#loading').hide();
        $('#fixed-stuff').css("pointer-events", "auto");
    }
    var deactivateiframe = function() {
        $('iframe').attr("src", "");
        $('#loading').show();
        $('#fixed-stuff').css("pointer-events", "none");
    }
    setInterval(function() {glitterAFew()}, 1000);
    setTimeout(function() {setInterval(function() {glitterAFew()}, 1000)}, 250);
    setTimeout(function() {setInterval(function() {glitterAFew()}, 1000)}, 500);
    setTimeout(function() {setInterval(function() {glitterAFew()}, 1000)}, 750);
    var readingArticle = false;
    var aboutActive = false;
    var toggleAbout = function() {
      $('#about').stop();
      if(aboutActive) {
        $('#about').fadeTo(500, 0);
        aboutActive = false;
      }
      else {
        $('#about').fadeTo(500, 1);
        aboutActive = true;
      }
    }
    $(document).ready(function() {
                      $(window).scroll(function() {
                                       if(readingArticle) {
                                            window.scrollTo(0, 0);
                                       }
                                       if($(window).scrollTop() > 500 && readingArticle === false) {
                                         $('#header-outer').removeClass("hidey");
                                         $('#header-outer').addClass("unhidey");
                                       }
                                       else {
                                         $('#about').fadeTo(500, 0);
                                         aboutActive = false;
                                         $('#header-outer').addClass("hidey");
                                         $('#header-outer').removeClass("unhidey");
                                       }
                                       });
                      $('#button').click(function() {
                                         readingArticle = false;
                                         down();
                                         setTimeout(function() {deactivateiframe()}, 1000);
                                         });
                      $('#article0').click(function() {
                                                setTimeout(function() {readingArticle = true; activateiframe(0);}, 1000);
                                                up();
                                                });
                      $('#article1').click(function() {
                        setTimeout(function() {readingArticle = true; activateiframe(1);}, 1000);
                        up();
                      });
                      $('#article2').click(function() {
                        setTimeout(function() {readingArticle = true; activateiframe(2);}, 1000);
                        up();
                      });
                      });
    </script>
    </body>
</html>
